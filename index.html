<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Jxlint by selesse</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Jxlint</h1>
        <h2>Framework for doing static analysis in Java</h2>
        <a href="https://github.com/selesse/jxlint" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="jxlint" class="anchor" href="#jxlint" aria-hidden="true"><span class="octicon octicon-link"></span></a>jxlint</h1>

<p><a href="https://travis-ci.org/selesse/jxlint"><img src="https://travis-ci.org/selesse/jxlint.png" alt="Build status"></a></p>

<ul>
<li><a href="CHANGELOG.md">Changelog</a></li>
</ul>

<p>jxlint is a Java framework for performing static analysis. You create your
custom validation logic in Java, specify which files to perform this
validation on, and add some documentation. The following "boring" stuff is
taken care of for you:</p>

<pre><code>usage: jxlint [flags] &lt;directory&gt;
 -h,--help                     Usage information, help message.
 -v,--version                  Output version information.
 -p,--profile                  Measure time every rule takes to complete.
 -l,--list                     Lists lint rules with a short, summary
                               explanation.
 -b,--web &lt;port&gt;               Run in the background, as a website.
                               (default port: 8380)
 -r,--rules                    Prints a Markdown dump of the program's
                               rules.
 -s,--show &lt;RULE[s]&gt;           Lists a verbose rule explanation.
 -c,--check &lt;RULE[s]&gt;          Only check for these rules.
 -d,--disable &lt;RULE[s]&gt;        Disable the list of rules.
 -e,--enable &lt;RULE[s]&gt;         Enable the list of rules.
 -y,--category &lt;CATEGORY[s]&gt;   Run all rules of a certain category.
 -w,--nowarn                   Only check for errors; ignore warnings.
 -Wall,--Wall                  Check all warnings, including those off by
                               default.
 -Werror,--Werror              Treat all warnings as errors.
 -q,--quiet                    Don't output any progress or reports.
 -t,--html &lt;filename&gt;          Create an HTML report.
 -x,--xml &lt;filename&gt;           Create an XML (!!) report.

&lt;RULE[s]&gt; should be comma separated, without spaces.
Exit Status:
0                     Success
1                     Failed
2                     Command line error
</code></pre>

<h2>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Motivation</h2>

<p>The goal of this framework is to provide an easy, intuitive way to perform
file validation. A user specifies a set of "rules" (i.e. validations) that
should be executed against a directory. Rules contain three major pieces of
information: which files to validate, what the actual validation logic is, and
documentation explaining its purpose.</p>

<p>Another goal is to have an architecture that encouraged rules to be
self-contained. Anybody interested in verifying, adding, or removing existing
rules should be able to do so quickly (i.e. everything is located where you'd
expect), and efficiently (i.e. adding new rules is intuitive and simple,
requiring little overhead). Additionally, adding tests to validate rules
should be straightforward.</p>

<h3>
<a id="potential-users" class="anchor" href="#potential-users" aria-hidden="true"><span class="octicon octicon-link"></span></a>Potential Users</h3>

<ul>
<li><p>If you are working with a framework that relies on XML for various parts of
the system and you'd like to verify that certain configurations are correct
before running the system, you might want to use this framework.</p></li>
<li><p>If you are trying to create a lint/static analysis tool, you might want
to use this framework so you don't have to reinvent the wheel. Various
components are already implemented for you. See the
<a href="doc/architecture.md">architecture</a> for more details.</p></li>
</ul>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p><a href="http://gradle.org">Gradle</a> is required to build the code. If Gradle is not
already installed, you can use the wrapper to install it for you.</p>

<p>The required libraries/dependencies can be found in
<a href="build.gradle">the Gradle build file</a>.</p>

<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h2>

<ol>
<li>Specify <code>com.selesse:jxlint:1.7.0</code> as a Maven dependency.</li>
<li>
<p>Make customizations:</p>

<p>Create all your rules. It's recommended to put all the rules in one directory,
as can be seen in the <a href="src/test/java/com/selesse/jxlint/samplerules">sample implementations</a>.</p>

<div class="highlight highlight-java"><pre><span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">XmlEncodingRule</span> <span class="pl-s">extends</span> <span class="pl-e">LintRule</span> {
    <span class="pl-s">public</span> <span class="pl-en">XmlEncodingRule</span> () {
        <span class="pl-v">super</span>(<span class="pl-s1"><span class="pl-pds">"</span>XML encoding specified<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Encoding of the XML should be specified.<span class="pl-pds">"</span></span>,
                <span class="pl-s1"><span class="pl-pds">"</span>The XML encoding should be specified. For example, &lt;?xml version=<span class="pl-cce">\"</span>1.0<span class="pl-cce">\"</span> encoding=<span class="pl-cce">\"</span>UTF-8<span class="pl-cce">\"</span>?&gt;.<span class="pl-pds">"</span></span>,
                <span class="pl-stj">Severity</span><span class="pl-c1"><span class="pl-k">.</span>WARNING</span>, <span class="pl-stj">Category</span><span class="pl-c1"><span class="pl-k">.</span>LINT</span>, <span class="pl-c1">false</span>);
    }

    <span class="pl-st">@Override</span>
    <span class="pl-s">public</span> <span class="pl-st">List&lt;<span class="pl-stj">File</span>&gt;</span> <span class="pl-en">getFilesToValidate</span>() {
        <span class="pl-k">return</span> <span class="pl-stj">FileUtils</span><span class="pl-k">.</span>allFilesWithExtension(getSourceDirectory(), <span class="pl-s1"><span class="pl-pds">"</span>xml<span class="pl-pds">"</span></span>);
    }

    <span class="pl-st">@Override</span>
    <span class="pl-s">public</span> <span class="pl-st">List&lt;<span class="pl-stj">LintError</span>&gt;</span> <span class="pl-en">getLintErrors</span>(<span class="pl-stj">File</span> <span class="pl-v">file</span>) {
        <span class="pl-st">List&lt;<span class="pl-stj">LintError</span>&gt;</span> lintErrorList <span class="pl-k">=</span> <span class="pl-stj">Lists</span><span class="pl-k">.</span>newArrayList();
        <span class="pl-k">try</span> {
            <span class="pl-stj">DocumentBuilderFactory</span> documentBuilderFactory <span class="pl-k">=</span> <span class="pl-stj">DocumentBuilderFactory</span><span class="pl-k">.</span>newInstance();
            <span class="pl-stj">DocumentBuilder</span> documentBuilder <span class="pl-k">=</span> documentBuilderFactory<span class="pl-k">.</span>newDocumentBuilder();
            documentBuilder<span class="pl-k">.</span>setErrorHandler(<span class="pl-c1">null</span>); <span class="pl-c">// silence the DOM error handler</span>
            <span class="pl-stj">Document</span> document <span class="pl-k">=</span> documentBuilder<span class="pl-k">.</span>parse(file);

            document<span class="pl-k">.</span>getDocumentElement()<span class="pl-k">.</span>normalize();

            <span class="pl-k">if</span> (<span class="pl-stj">Strings</span><span class="pl-k">.</span>isNullOrEmpty(document<span class="pl-k">.</span>getXmlEncoding())) {
                lintErrorList<span class="pl-k">.</span>add(<span class="pl-stj">LintError</span><span class="pl-k">.</span>with(<span class="pl-v">this</span>, file)<span class="pl-c1">.</span>
                    addMessage(<span class="pl-s1"><span class="pl-pds">"</span>Encoding wasn't specified<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>create());
            }
        }
        <span class="pl-k">catch</span> (<span class="pl-stj">Exception</span> e) {
            lintErrorList<span class="pl-k">.</span>add(<span class="pl-stj">LintError</span><span class="pl-k">.</span>with(<span class="pl-v">this</span>, file)<span class="pl-c1">.</span>
                addMessage(<span class="pl-s1"><span class="pl-pds">"</span>Error checking rule, could not parse XML<span class="pl-pds">"</span></span>)<span class="pl-c1">.</span>
                addException(e)<span class="pl-k">.</span>create());
        }

        <span class="pl-k">return</span> lintErrorList;
    }
}</pre></div>

<p>Add (at least) 1 positive and 1 negative test case. A (recommended) version
of such a tester can be found <a href="src/test/java/com/selesse/jxlint/AbstractPassFailFileTest.java">here</a>.
See the Javadoc for instructions on how to set this up. Extending this class leads to
<a href="src/test/java/com/selesse/jxlint/samplerulestest/xml/XmlEncodingTest.java">the following positive + negative test case</a>:</p>

<div class="highlight highlight-java"><pre><span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">XmlEncodingTest</span> <span class="pl-s">extends</span> <span class="pl-e">AbstractPassFailFileXmlFileTest</span> {
    <span class="pl-s">public</span> <span class="pl-en">XmlEncodingTest</span>() {
        <span class="pl-v">super</span>(<span class="pl-k">new</span> <span class="pl-stj">XmlEncodingRule</span>());
    }
}</pre></div>

<p>Set up the container by adding all your custom-defined rules.</p>

<div class="highlight highlight-java"><pre><span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">MyXmlLintRulesImpl</span> <span class="pl-s">extends</span> <span class="pl-e">AbstractLintRules</span> {
    <span class="pl-st">@Override</span>
    <span class="pl-s">public</span> <span class="pl-st">void</span> <span class="pl-en">initializeLintRules</span>() {
        <span class="pl-c">// Example rule saying that XML must be valid</span>
        lintRules<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-stj">ValidXmlRule</span>());

        <span class="pl-c">// Example rule saying that duplicate attribute tags within XML are bad</span>
        lintRules<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-stj">UniqueAttributeRule</span>());

        <span class="pl-c">// Example (disabled-by-default) rules</span>
        lintRules<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-stj">XmlVersionRule</span>());
        lintRules<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-stj">XmlEncodingRule</span>());
    }
}</pre></div>

<p>In your application's Main class:</p>

<div class="highlight highlight-java"><pre><span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">Main</span> {
    <span class="pl-s">public</span> <span class="pl-s">static</span> <span class="pl-st">void</span> <span class="pl-en">main</span>(<span class="pl-st">String</span>[] <span class="pl-v">args</span>) {
        <span class="pl-stj">Jxlint</span> jxlint <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">Jxlint</span>(<span class="pl-k">new</span> <span class="pl-stj">MyXmlLintRulesImpl</span>(), <span class="pl-k">new</span> <span class="pl-stj">MyProgramSettings</span>());
        jxlint<span class="pl-k">.</span>parseArgumentsAndDispatch(args);
    }
}</pre></div>
</li>
<li><p>Build your application.</p></li>
</ol>

<h2>
<a id="building-the-code" class="anchor" href="#building-the-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building the Code</h2>

<p>To build the code, run <code>gradle</code>. This will create a jxlint jar. If you do
not have gradle installed, type <code>gradlew</code>.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Sample implementations can be found <a href="src/test/java/com/selesse/jxlint/samplerules">here</a>.</p>

<h2>
<a id="versioning" class="anchor" href="#versioning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Versioning</h2>

<p>This project follows <a href="http://semver.org/">Semantic Versioning</a> as much as
possible.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>This software is licensed under the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT License</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/selesse/jxlint/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/selesse/jxlint/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/selesse/jxlint"></a> is maintained by <a href="https://github.com/selesse">selesse</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
